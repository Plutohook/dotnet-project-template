
集成事件与事件总线
过程说明：

集成事件与领域事件是一起相互作用的，
领域事件激发时，对应的handler将此次事件的信息保存到集成事件的日志表中，保存这个操作，使用到了对应发生事件的领域实体所在的上下文的事务象以证致(handl中，itOfWork.GetCurrentTransaction();来获取实体db上下文的事务对象，然后保存(注意transactionId)。)
然后事务提交完成后，实体的更改和事件日志都会被记录到数据库。使用同一个事务保证了一致性
然后通过集成时间服务，根据次事务id查询出需要激发的领域事件数据，然后遍历操作：
1、标记为处理中
2、通过事件总线(可以支持MQ等消息队列或者其他组件进行发布)
3、标记为处理完成、遇到异常标记为失败(此处可增加policy的策略重试功能，但是会影响本次操作的响应时间)，由后台任务定时重试这些失败的事件。最性。消端一无(需其他机处理)。极大可能的保证最终一致性。

如果此次操作没有涉及通知其他系统，可不使用事务，对应的command对象上不需要加CommandTransactionAttribute特性(反射也会影响性能)。
